(this.webpackJsonpstat=this.webpackJsonpstat||[]).push([[0],{41:function(t,e,s){},42:function(t,e,s){},65:function(t,e,s){},69:function(t,e,s){"use strict";s.r(e);var a=s(1),n=s.n(a),i=s(33),c=s.n(i),o=(s(41),s(10)),r=s(2),l=s(9),u=s(13),b=s(14),d=s(8),h=s(16),j=s(15),f=(s.p,s(42),s(43),s(62),s(64),s(70)),p=s(72),g=(s(65),s(0)),v=function(t){Object(h.a)(s,t);var e=Object(j.a)(s);function s(t){var a;Object(u.a)(this,s),(a=e.call(this,t)).interval=null;var n=localStorage.getItem(a.props.config.name)||null;return n&&(n=JSON.parse(n),a.bought_at=n.bought_at,a.qty=n.qty),a.state=Object(r.a)({status:"active",config:a.props.config||{},editMode:!1,alert:!1,alerting:!1},n),a.say=a.say.bind(Object(d.a)(a)),a.speak=a.speak.bind(Object(d.a)(a)),a.save=a.save.bind(Object(d.a)(a)),a.toggleAlert=a.toggleAlert.bind(Object(d.a)(a)),a}return Object(b.a)(s,[{key:"componentDidMount",value:function(){}},{key:"say",value:function(t){this.speak(t)}},{key:"speak",value:function(t){var e=new SpeechSynthesisUtterance;e.lang="en-US",e.volume=1,e.rate=.9,e.pitch=1,e.text=t,window.speechSynthesis.speak(e)}},{key:"save",value:function(){var t=this;this.setState({saving:!0},(function(){t.setState({saving:null,editMode:!1,bought_at:t.bought_at,qty:t.qty},(function(){localStorage.setItem(t.props.config.name,JSON.stringify({bought_at:t.state.bought_at,qty:t.state.qty,alert:t.state.alert}))}))}))}},{key:"componentDidUpdate",value:function(){this.state.alert&&this.sp_perc&&this.sp_perc>1&&this.props.playAudio()}},{key:"toggleAlert",value:function(){this.setState({alert:!this.state.alert})}},{key:"render",value:function(){var t=this,e=0,s=0,a=0;return this.state.bought_at&&(e=this.props.config.buy-this.state.bought_at,s=100*e/this.state.bought_at),this.state.qty&&(a=this.state.qty*e),this.sp_perc=s,this.sp=e,this.tp=a,Object(g.jsxs)("div",{className:"service-monitor-card ",children:[Object(g.jsxs)("div",{style:{flex:2,display:"flex",flexDirection:"column",justifyContent:"spaceAround",marginBottom:"10px"},children:[Object(g.jsxs)("div",{className:"row-ends",children:[Object(g.jsxs)("h3",{children:[this.state.config.name,"/INR"]}),this.state.alert?Object(g.jsx)("i",{class:"fas fa-bell ",onClick:this.toggleAlert}):Object(g.jsx)("i",{class:"far fa-bell",onClick:this.toggleAlert})]}),Object(g.jsxs)("p",{children:["Current : \u20b9",this.props.config.buy," ",Object(g.jsx)("span",{style:{padding:"5px"},children:this.props.config.buy-this.props.config.last>=0?Object(g.jsx)("i",{class:"fas fa-caret-up"}):Object(g.jsx)("i",{class:"fas fa-caret-down"})}),"  ",Object(g.jsx)("br",{}),"Last : \u20b9",this.props.config.last," ",Object(g.jsx)("br",{}),"High : \u20b9",this.props.config.high," | Low : \u20b9",this.props.config.low," ",Object(g.jsx)("br",{})]}),Object(g.jsx)("div",{className:"portfolio-item-editor",children:t.state.editMode?Object(g.jsxs)(f.a,{children:[Object(g.jsxs)(f.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(g.jsx)(f.a.Label,{children:"  Bought At : "}),Object(g.jsx)(f.a.Control,{type:"number",defaultValue:t.state.bought_at||null,value:t.bought_at||null,onChange:function(e){t.bought_at=e.target.value,t.setState({time:new Date})}})]}),Object(g.jsxs)(f.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(g.jsx)(f.a.Label,{children:"  Qty : "}),Object(g.jsx)(f.a.Control,{type:"number",defaultValue:t.state.qty||null,value:t.qty,onChange:function(e){t.qty=e.target.value,t.setState({time:new Date})}})]}),Object(g.jsx)(p.a,{onClick:t.save,children:t.state.saving?"Saving":"Save"})," \xa0",Object(g.jsx)(p.a,{onClick:function(){t.bought_at=null,t.qty=null,t.setState({bought_at:null,qty:null,time:new Date,editMode:!1}),localStorage.removeItem(t.props.config.name)},children:"Clear"})]}):Object(g.jsxs)("div",{className:"row-space-around",children:[Object(g.jsx)("i",{class:"fas fa-edit",onClick:function(){t.setState({editMode:!0})}}),Object(g.jsx)("i",{class:"fas fa-trash",onClick:t.props.onDelete})]})})]}),Object(g.jsx)("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"spaceAround"},children:function(){if(e)return Object(g.jsx)("div",{class:"dchange","data-change":e,style:{flex:1,alignItems:"flex-end",fontSize:"150%"},children:e?Object(g.jsxs)("div",{"data-change":e,style:{flex:1,alignItems:"flex-end"},children:[a>=0?"Profit":"Loss",": \u20b9  ",a.toFixed(3),"  ","   ",Object(g.jsx)("br",{}),"(",s.toFixed(2),"%)"]}):null})}()})]})}}]),s}(a.Component),y=(a.Component,s(71)),O=s(35),m=function(t){Object(h.a)(s,t);var e=Object(j.a)(s);function s(t){var a;Object(u.a)(this,s),(a=e.call(this,t)).togglePlay=function(){a.audio.play()};var n=localStorage.getItem("favourites")||null;return n&&(n=JSON.parse(n)),a.state={loaded:!1,play:!1,primary:"inr",favourites:n||{btc:{},eth:{}}},a.socketConn=null,a.processMessage=a.processMessage.bind(Object(d.a)(a)),a.processTicker=a.processTicker.bind(Object(d.a)(a)),a.init=a.init.bind(Object(d.a)(a)),a.cryptos=[],a.audio=new Audio("/Bell Ringing v2.wav"),a}return Object(b.a)(s,[{key:"componentDidMount",value:function(){var t=this;this.audio.addEventListener("ended",(function(){return t.setState({play:!1})})),this.init()}},{key:"init",value:function(){var t=this;console.log("Connecting again"),this.socketConn=new WebSocket("wss://stream-internal.wazirx.com/stream"),this.socketConn.onopen=function(e){t.socketConn.send(JSON.stringify({event:"subscribe",streams:["!ticker@arr"]})),t.socketConn.send(JSON.stringify({event:"subscribe",streams:["crypto@rates"]}))},this.socketConn.onerror=function(e){console.log("error"),t.init()},this.socketConn.onmessage=this.processMessage}},{key:"processMessage",value:function(t){var e=JSON.parse(t.data);if(e){if(e&&"error"==e.status)return void this.init();if("!ticker@arr"===e.stream)this.processTicker(e.data)}}},{key:"processTicker",value:function(t){Object.entries(this.cryptos).length;for(var e=0,s=Object.entries(t);e<s.length;e++){var a=Object(l.a)(s[e],2),n=(a[0],a[1]);n.quote_unit==this.state.primary&&(n.base_unit in this.cryptos?this.cryptos[n.base_unit]=Object(r.a)(Object(r.a)({},this.cryptos[n.base_unit]),{},{change:n.buy-this.cryptos[n.base_unit].current_price},n):this.cryptos[n.base_unit]=Object(r.a)({start_price:n.buy,current_price:n.buy,change:0},n))}this.setState({time:new Date})}},{key:"componentWillUnmount",value:function(){var t=this;this.audio.removeEventListener("ended",(function(){return t.setState({play:!1})})),this.socketConn.close()}},{key:"addFav",value:function(t){var e=this;this.setState({favourites:Object(r.a)(Object(r.a)({},this.state.favourites),{},Object(o.a)({},t,""))},(function(){localStorage.setItem("favourites",JSON.stringify(e.state.favourites))}))}},{key:"delFav",value:function(t){var e=this;if(window.confirm("Are you sure you wanna delete ?")){var s=this.state.favourites;delete s[t],this.setState({favourites:s},(function(){localStorage.setItem("favourites",JSON.stringify(e.state.favourites))}))}}},{key:"render",value:function(){var t=this;return Object(g.jsxs)("div",{className:"container",children:[Object(g.jsxs)("div",{className:"header",children:[Object(g.jsxs)("h1",{style:{color:"#023e8a"},children:["Crypto",Object(g.jsx)("span",{children:"Mon"})," ",Object(g.jsx)("i",{class:"fas fa-bell rotating"})]}),Object(g.jsx)("div",{children:Object(g.jsxs)(y.a,{className:"mb-3",children:[Object(g.jsx)(O.a,{placeholder:"Add a symbol eg: btc","aria-label":"Add a symboll eg: btc","aria-describedby":"basic-addon2",onChange:function(e){t.setState({fav_search:e.target.value})}}),Object(g.jsx)(p.a,{variant:"outline-secondary",id:"button-addon2",className:"btn btn-primary",onClick:function(){t.addFav(t.state.fav_search)},children:"Add"})]})})]}),Object(g.jsx)("div",{style:{flexGrow:1},children:Object(g.jsx)("div",{className:"ServiceMonitorApp",children:Object.entries(this.cryptos).map((function(e){if(Object.keys(t.state.favourites).includes(e[1].base_unit))return Object(g.jsx)(v,{onDelete:function(){t.delFav(e[1].base_unit)},playAudio:t.togglePlay,config:Object(r.a)({name:e[1].base_unit},e[1])},"card+".concat(e[1].base_unit))}))})}),Object(g.jsx)("div",{children:"Footer"})]})}}]),s}(a.Component),x=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,73)).then((function(e){var s=e.getCLS,a=e.getFID,n=e.getFCP,i=e.getLCP,c=e.getTTFB;s(t),a(t),n(t),i(t),c(t)}))};c.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(m,{})}),document.getElementById("root")),x()}},[[69,1,2]]]);
//# sourceMappingURL=main.f8d337f2.chunk.js.map